<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>barang murah SE online raya</title>

<style>
*{box-sizing:border-box;font-family:Arial,sans-serif}
body{margin:0;background:#f4fff4;color:#1f3d1f}
body.dark{background:#121212;color:#e0e0e0}
header,footer{background:#8fd694;padding:16px;text-align:center}
body.dark header,body.dark footer{background:#1e1e1e}
.container{padding:16px}
.products{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:16px}
.card{background:#fff;border-radius:10px;padding:12px;box-shadow:0 2px 6px rgba(0,0,0,.1);text-align:center}
body.dark .card,body.dark #cart-items{background:#1f1f1f;color:#fff}
.card img{width:100%;height:160px;object-fit:cover;border-radius:8px}
.price{font-weight:bold;color:#2e7d32}
.btn{padding:8px;background:#4caf50;color:#fff;border:none;border-radius:6px;cursor:pointer;margin-top:6px;width:100%}
.btn.red{background:#e53935}
.btn.gray{background:#777}
.btn:disabled{background:#aaa;cursor:not-allowed}
#cart{position:fixed;bottom:20px;right:20px;background:#4caf50;color:#fff;padding:12px 16px;border-radius:50px;cursor:pointer}
#cart-items{position:fixed;bottom:80px;right:20px;background:#fff;padding:12px;border-radius:10px;max-width:320px;display:none}
#cart-items ul{list-style:none;padding:0;margin:0}
#cart-items li{display:flex;justify-content:space-between;margin-bottom:6px}
input,select{width:100%;padding:8px;margin:6px 0}
.hidden{display:none}
small{font-size:11px;color:#555}
</style>
</head>

<body>

<header>
<h2>barang murah SE online raya</h2>
<p>Baju & Celana Anak â€¢ Remaja â€¢ Dewasa</p>
<button class="btn gray" onclick="toggleDark()">ðŸŒ™ Dark Mode</button>
</header>

<div class="container">

<select id="filter" onchange="renderProducts()">
<option value="All">Semua</option>
<option>Anak</option>
<option>Remaja</option>
<option>Dewasa</option>
</select>

<h3>Produk</h3>
<div id="products" class="products"></div>

<h3>Admin</h3>
<div id="admin-login">
<input id="admin-pass" placeholder="Password admin">
<button class="btn" onclick="login()">Login</button>
</div>

<div id="admin-panel" class="hidden">
<input id="p-name" placeholder="Nama Produk">
<input id="p-price" type="number" placeholder="Harga">
<input id="p-stock" type="number" placeholder="Stok">
<input type="file" id="p-img" accept="image/*">
<select id="p-cat">
<option>Anak</option><option>Remaja</option><option>Dewasa</option>
</select>
<button class="btn" onclick="addProduct()">Tambah Produk</button>
<button class="btn gray" onclick="exportCSV()">Export Order CSV</button>
<button class="btn red" onclick="logout()">Logout</button>
</div>

</div>

<div id="cart" onclick="toggleCart()">ðŸ›’ <span id="cart-count">0</span></div>

<div id="cart-items">
<h3>Keranjang</h3>
<ul id="cart-list"></ul>
<div>Total: Rp<span id="cart-total">0</span></div>
<button class="btn" onclick="checkout()">Checkout WhatsApp</button>
</div>

<footer>Â© 2026 barang murah SE online raya</footer>

<script>
const ADMIN_PASS="admin123";

let products=JSON.parse(localStorage.getItem("products"))||[];
let cart=JSON.parse(localStorage.getItem("cart"))||[];
let orders=JSON.parse(localStorage.getItem("orders"))||[];

const productsBox=document.getElementById("products");

function save(){
localStorage.setItem("products",JSON.stringify(products));
localStorage.setItem("cart",JSON.stringify(cart));
localStorage.setItem("orders",JSON.stringify(orders));
}

function renderProducts(){
productsBox.innerHTML="";
const f=filter.value;
products.filter(p=>f==="All"||p.category===f).forEach((p,i)=>{
productsBox.innerHTML+=`
<div class="card">
<img src="${p.img}">
<b>${p.name}</b>
<div class="price">Rp${p.price.toLocaleString()}</div>
<small>Stok: ${p.stock}</small>
<button class="btn" ${p.stock<=0?"disabled":""} onclick="addToCart(${i})">
${p.stock<=0?"Habis":"Tambah"}
</button>
${adminPanel.classList.contains("hidden")?"":`
<button class="btn gray" onclick="edit(${i})">Edit</button>
<button class="btn red" onclick="del(${i})">Hapus</button>`}
</div>`;
});
}

function addProduct(){
const name=pName.value.trim();
const price=+pPrice.value;
const stock=+pStock.value;
const cat=pCat.value;
const file=pImg.files[0];
if(!name||price<=0||stock<0||!file){alert("Data invalid");return;}
const r=new FileReader();
r.onload=e=>{
products.push({name,price,stock,category:cat,img:e.target.result});
save();renderProducts();
pName.value=pPrice.value=pStock.value=pImg.value="";
};
r.readAsDataURL(file);
}

function edit(i){
const n=prompt("Nama:",products[i].name);
const p=+prompt("Harga:",products[i].price);
const s=+prompt("Stok:",products[i].stock);
if(!n||p<=0||s<0)return;
products[i].name=n;
products[i].price=p;
products[i].stock=s;
save();renderProducts();
}

function del(i){
if(confirm("Hapus produk?")){
products.splice(i,1);
save();renderProducts();
}
}

function addToCart(i){
cart.push(products[i]);
updateCart();
}

function updateCart(){
cartList.innerHTML="";
let t=0;
cart.forEach((x,i)=>{
t+=x.price;
cartList.innerHTML+=`<li>${x.name}<span style="color:red;cursor:pointer" onclick="remove(${i})">Ã—</span></li>`;
});
cartCount.innerText=cart.length;
cartTotal.innerText=t.toLocaleString();
save();
}

function remove(i){cart.splice(i,1);updateCart();}
function toggleCart(){cartItems.style.display=cartItems.style.display==="block"?"none":"block"}

function checkout(){
if(!cart.length){alert("Keranjang kosong");return;}
const invoice="INV-"+Date.now();
cart.forEach(item=>{
const p=products.find(x=>x.name===item.name);
if(p) p.stock--;
});
orders.push({
invoice,
items:cart.map(x=>x.name).join(", "),
total:cart.reduce((a,b)=>a+b.price,0),
date:new Date().toLocaleString()
});
save();
let msg=`Halo saya mau order%0AInvoice: ${invoice}%0A`;
cart.forEach(p=>msg+=`- ${p.name} Rp${p.price}%0A`);
msg+=`Total: Rp${cart.reduce((a,b)=>a+b.price,0)}%0A`;
cart=[];
updateCart();
renderProducts();
window.open(`https://wa.me/6285691451094?text=${msg}`);
}

function exportCSV(){
if(!orders.length){alert("Belum ada order");return;}
let csv="Invoice,Items,Total,Tanggal\n";
orders.forEach(o=>{
csv+=`${o.invoice},"${o.items}",${o.total},"${o.date}"\n`;
});
const blob=new Blob([csv],{type:"text/csv"});
const a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download="orders.csv";
a.click();
}

function login(){
if(adminPass.value===ADMIN_PASS){
adminPanel.classList.remove("hidden");
adminLogin.classList.add("hidden");
renderProducts();
}else alert("Password salah");
}

function logout(){
adminPanel.classList.add("hidden");
adminLogin.classList.remove("hidden");
renderProducts();
}

function toggleDark(){
document.body.classList.toggle("dark");
localStorage.setItem("dark",document.body.classList.contains("dark"));
}
if(localStorage.getItem("dark")==="true"){
document.body.classList.add("dark");
}

renderProducts();updateCart();
</script>

</body>
</html>
